<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 Week 13 - Fundamental of Natural Language Processing | PSYC614: Text and Talk (Quantitative)</title>
  <meta name="description" content="This is a bookdown created for the quantitative analysis portion of PSYC614 taught by Dr Stefan Leach at Lancaster University." />
  <meta name="generator" content="bookdown 0.42 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 Week 13 - Fundamental of Natural Language Processing | PSYC614: Text and Talk (Quantitative)" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is a bookdown created for the quantitative analysis portion of PSYC614 taught by Dr Stefan Leach at Lancaster University." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 Week 13 - Fundamental of Natural Language Processing | PSYC614: Text and Talk (Quantitative)" />
  
  <meta name="twitter:description" content="This is a bookdown created for the quantitative analysis portion of PSYC614 taught by Dr Stefan Leach at Lancaster University." />
  

<meta name="author" content="Stefan Leach" />


<meta name="date" content="2025-01-30" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="appendix-foundations-of-r.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R Workshop</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> url: your book url like https://bookdown.org/yihui/bookdown</a></li>
<li class="chapter" data-level="2" data-path="week-13---fundamental-of-natural-language-processing.html"><a href="week-13---fundamental-of-natural-language-processing.html"><i class="fa fa-check"></i><b>2</b> Week 13 - Fundamental of Natural Language Processing</a>
<ul>
<li class="chapter" data-level="2.1" data-path="week-13---fundamental-of-natural-language-processing.html"><a href="week-13---fundamental-of-natural-language-processing.html#homework---compiling-potential-sources-of-data"><i class="fa fa-check"></i><b>2.1</b> Homework - Compiling Potential Sources of Data</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="week-13---fundamental-of-natural-language-processing.html"><a href="week-13---fundamental-of-natural-language-processing.html#collective-data-bank"><i class="fa fa-check"></i><b>2.1.1</b> Collective Data Bank</a></li>
<li class="chapter" data-level="2.1.2" data-path="week-13---fundamental-of-natural-language-processing.html"><a href="week-13---fundamental-of-natural-language-processing.html#sources-of-data"><i class="fa fa-check"></i><b>2.1.2</b> Sources of Data</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="week-13---fundamental-of-natural-language-processing.html"><a href="week-13---fundamental-of-natural-language-processing.html#task-1---familiarize-yourself-with-important-r-commands"><i class="fa fa-check"></i><b>2.2</b> Task 1 - Familiarize yourself with important R commands</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="week-13---fundamental-of-natural-language-processing.html"><a href="week-13---fundamental-of-natural-language-processing.html#file-types"><i class="fa fa-check"></i><b>2.2.1</b> File Types</a></li>
<li class="chapter" data-level="2.2.2" data-path="week-13---fundamental-of-natural-language-processing.html"><a href="week-13---fundamental-of-natural-language-processing.html#accessing-nested-data"><i class="fa fa-check"></i><b>2.2.2</b> Accessing nested data</a></li>
<li class="chapter" data-level="2.2.3" data-path="week-13---fundamental-of-natural-language-processing.html"><a href="week-13---fundamental-of-natural-language-processing.html#cleaning-data"><i class="fa fa-check"></i><b>2.2.3</b> Cleaning data</a></li>
<li class="chapter" data-level="2.2.4" data-path="week-13---fundamental-of-natural-language-processing.html"><a href="week-13---fundamental-of-natural-language-processing.html#counting-words"><i class="fa fa-check"></i><b>2.2.4</b> Counting words</a></li>
<li class="chapter" data-level="2.2.5" data-path="week-13---fundamental-of-natural-language-processing.html"><a href="week-13---fundamental-of-natural-language-processing.html#identifying-specific-instances"><i class="fa fa-check"></i><b>2.2.5</b> Identifying specific instances</a></li>
<li class="chapter" data-level="2.2.6" data-path="week-13---fundamental-of-natural-language-processing.html"><a href="week-13---fundamental-of-natural-language-processing.html#using-loops"><i class="fa fa-check"></i><b>2.2.6</b> Using loops</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="week-13---fundamental-of-natural-language-processing.html"><a href="week-13---fundamental-of-natural-language-processing.html#task-2---putting-your-knowledge-to-the-test"><i class="fa fa-check"></i><b>2.3</b> Task 2 - Putting your knowledge to the test</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="week-13---fundamental-of-natural-language-processing.html"><a href="week-13---fundamental-of-natural-language-processing.html#compile-a-single-dataframe"><i class="fa fa-check"></i><b>2.3.1</b> Compile a single dataframe</a></li>
<li class="chapter" data-level="2.3.2" data-path="week-13---fundamental-of-natural-language-processing.html"><a href="week-13---fundamental-of-natural-language-processing.html#extract-nested-fields"><i class="fa fa-check"></i><b>2.3.2</b> Extract nested fields</a></li>
<li class="chapter" data-level="2.3.3" data-path="week-13---fundamental-of-natural-language-processing.html"><a href="week-13---fundamental-of-natural-language-processing.html#clean"><i class="fa fa-check"></i><b>2.3.3</b> Clean</a></li>
<li class="chapter" data-level="2.3.4" data-path="week-13---fundamental-of-natural-language-processing.html"><a href="week-13---fundamental-of-natural-language-processing.html#pick-out-relevant-cases"><i class="fa fa-check"></i><b>2.3.4</b> Pick out relevant cases</a></li>
<li class="chapter" data-level="2.3.5" data-path="week-13---fundamental-of-natural-language-processing.html"><a href="week-13---fundamental-of-natural-language-processing.html#solutions"><i class="fa fa-check"></i><b>2.3.5</b> Solutions</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="week-13---fundamental-of-natural-language-processing.html"><a href="week-13---fundamental-of-natural-language-processing.html#bonus-task-1---picking-your-data"><i class="fa fa-check"></i><b>2.4</b> Bonus Task 1 - Picking Your Data</a></li>
<li class="chapter" data-level="2.5" data-path="week-13---fundamental-of-natural-language-processing.html"><a href="week-13---fundamental-of-natural-language-processing.html#bonus-task-2---considering-ethical-issues"><i class="fa fa-check"></i><b>2.5</b> Bonus Task 2 - Considering Ethical Issues</a></li>
<li class="chapter" data-level="2.6" data-path="week-13---fundamental-of-natural-language-processing.html"><a href="week-13---fundamental-of-natural-language-processing.html#bonus-task-3---wrangling-your-data"><i class="fa fa-check"></i><b>2.6</b> Bonus Task 3 - Wrangling your data</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="appendix-foundations-of-r.html"><a href="appendix-foundations-of-r.html"><i class="fa fa-check"></i><b>3</b> Appendix: Foundations of R</a>
<ul>
<li class="chapter" data-level="3.1" data-path="appendix-foundations-of-r.html"><a href="appendix-foundations-of-r.html#setting-up-your-environment"><i class="fa fa-check"></i><b>3.1</b> Setting up your environment</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="appendix-foundations-of-r.html"><a href="appendix-foundations-of-r.html#installing-r"><i class="fa fa-check"></i><b>3.1.1</b> Installing R</a></li>
<li class="chapter" data-level="3.1.2" data-path="appendix-foundations-of-r.html"><a href="appendix-foundations-of-r.html#installing-rstudio"><i class="fa fa-check"></i><b>3.1.2</b> Installing RStudio</a></li>
<li class="chapter" data-level="3.1.3" data-path="appendix-foundations-of-r.html"><a href="appendix-foundations-of-r.html#launching-rstudio-and-setting-up-a-project"><i class="fa fa-check"></i><b>3.1.3</b> Launching RStudio and setting up a project</a></li>
<li class="chapter" data-level="3.1.4" data-path="appendix-foundations-of-r.html"><a href="appendix-foundations-of-r.html#installing-packages"><i class="fa fa-check"></i><b>3.1.4</b> Installing packages</a></li>
<li class="chapter" data-level="3.1.5" data-path="appendix-foundations-of-r.html"><a href="appendix-foundations-of-r.html#loading-packages"><i class="fa fa-check"></i><b>3.1.5</b> Loading packages</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="appendix-foundations-of-r.html"><a href="appendix-foundations-of-r.html#vectors-factors-matrices-and-data-frames"><i class="fa fa-check"></i><b>3.2</b> Vectors, factors, matrices, and data frames</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="appendix-foundations-of-r.html"><a href="appendix-foundations-of-r.html#vectors"><i class="fa fa-check"></i><b>3.2.1</b> Vectors</a></li>
<li class="chapter" data-level="3.2.2" data-path="appendix-foundations-of-r.html"><a href="appendix-foundations-of-r.html#factors"><i class="fa fa-check"></i><b>3.2.2</b> Factors</a></li>
<li class="chapter" data-level="3.2.3" data-path="appendix-foundations-of-r.html"><a href="appendix-foundations-of-r.html#matrices"><i class="fa fa-check"></i><b>3.2.3</b> Matrices</a></li>
<li class="chapter" data-level="3.2.4" data-path="appendix-foundations-of-r.html"><a href="appendix-foundations-of-r.html#data-frames"><i class="fa fa-check"></i><b>3.2.4</b> Data Frames</a></li>
<li class="chapter" data-level="3.2.5" data-path="appendix-foundations-of-r.html"><a href="appendix-foundations-of-r.html#accessing-subsets-of-vectors-and-data-frames"><i class="fa fa-check"></i><b>3.2.5</b> Accessing subsets of vectors and data frames</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="appendix-foundations-of-r.html"><a href="appendix-foundations-of-r.html#data-manipulation-with-tidyverse"><i class="fa fa-check"></i><b>3.3</b> Data manipulation with tidyverse</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="appendix-foundations-of-r.html"><a href="appendix-foundations-of-r.html#install-and-load-the-tidyverse-package"><i class="fa fa-check"></i><b>3.3.1</b> Install and load the <code>tidyverse</code> package</a></li>
<li class="chapter" data-level="3.3.2" data-path="appendix-foundations-of-r.html"><a href="appendix-foundations-of-r.html#the-pipe-operator"><i class="fa fa-check"></i><b>3.3.2</b> The pipe operator <code>%&gt;%</code></a></li>
<li class="chapter" data-level="3.3.3" data-path="appendix-foundations-of-r.html"><a href="appendix-foundations-of-r.html#selecting-columns-with-select"><i class="fa fa-check"></i><b>3.3.3</b> Selecting columns with <code>select()</code></a></li>
<li class="chapter" data-level="3.3.4" data-path="appendix-foundations-of-r.html"><a href="appendix-foundations-of-r.html#filtering-rows-with-filter"><i class="fa fa-check"></i><b>3.3.4</b> Filtering rows with <code>filter()</code></a></li>
<li class="chapter" data-level="3.3.5" data-path="appendix-foundations-of-r.html"><a href="appendix-foundations-of-r.html#renaming-variables-with-rename"><i class="fa fa-check"></i><b>3.3.5</b> Renaming variables with <code>rename()</code></a></li>
<li class="chapter" data-level="3.3.6" data-path="appendix-foundations-of-r.html"><a href="appendix-foundations-of-r.html#recoding-variables-with-recode-and-mutate"><i class="fa fa-check"></i><b>3.3.6</b> Recoding variables with <code>recode()</code> and <code>mutate()</code></a></li>
<li class="chapter" data-level="3.3.7" data-path="appendix-foundations-of-r.html"><a href="appendix-foundations-of-r.html#creating-new-variables-by-combining-select-with-rowmeans-or-rowsums"><i class="fa fa-check"></i><b>3.3.7</b> Creating new variables by combining <code>select()</code> with <code>rowMeans()</code> or <code>rowSums()</code></a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">PSYC614: Text and Talk (Quantitative)</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="week-13---fundamental-of-natural-language-processing" class="section level1 hasAnchor" number="2">
<h1><span class="header-section-number">Chapter 2</span> Week 13 - Fundamental of Natural Language Processing<a href="week-13---fundamental-of-natural-language-processing.html#week-13---fundamental-of-natural-language-processing" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>The purpose of this workshop is to tackle some basic problems of how to read and manage text data. If you have time, start to identify an appropriate dataset to support your research project and.</p>
<div id="homework---compiling-potential-sources-of-data" class="section level2 hasAnchor" number="2.1">
<h2><span class="header-section-number">2.1</span> Homework - Compiling Potential Sources of Data<a href="week-13---fundamental-of-natural-language-processing.html#homework---compiling-potential-sources-of-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>To remind you, prior to this workshop session you were tasked with searching for potential sources and contributing them to a collective data bank.</p>
<p>You are expected to <strong>contribute at least three sources of data</strong>.</p>
<div id="collective-data-bank" class="section level3 hasAnchor" number="2.1.1">
<h3><span class="header-section-number">2.1.1</span> Collective Data Bank<a href="week-13---fundamental-of-natural-language-processing.html#collective-data-bank" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The collective data bank can be accessed here: <a href="https://docs.google.com/spreadsheets/d/19_Tvwe-eWtIVInTZFouKvYNkt0aq-gcpMaBTyNfCCLk/edit?gid=0#gid=0" class="uri">https://docs.google.com/spreadsheets/d/19_Tvwe-eWtIVInTZFouKvYNkt0aq-gcpMaBTyNfCCLk/edit?gid=0#gid=0</a></p>
<p>Please fill in each cell for your contributions. Note, you must confirm that the raw text is available for each of your contributions. You will often find that sources unfortunately do not share the raw texts, often due to ethical considerations. Your contributions <strong>must</strong> contain text data.</p>
<p>When adding your contributions, please also take a look at those which already exist in the document and only add your contribution if it does not replicate one which is already present.</p>
</div>
<div id="sources-of-data" class="section level3 hasAnchor" number="2.1.2">
<h3><span class="header-section-number">2.1.2</span> Sources of Data<a href="week-13---fundamental-of-natural-language-processing.html#sources-of-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You are expected to conduct an independent search via Google and also to look for relevant scholarly articles which may share their data via public repositories. Below are some initial resources. Please note that these are only meant to be starting-points.</p>
<p><strong>Harvard Dataverse Repository</strong></p>
<p>The Harvard Dataverse Repository is a free resource open to all researchers from any discipline, both inside and outside of the Harvard community, where you can share, archive, cite, access, and explore research data.</p>
<p>The Harvard Dataverse Repository can be accessed here: <a href="https://dataverse.harvard.edu/" class="uri">https://dataverse.harvard.edu/</a></p>
<p><strong>Papers with Code</strong></p>
<p>The mission of Papers with Code is to create a free and open resource with Machine Learning papers, code, datasets, methods and evaluation tables.</p>
<p>The website can be accessed here: <a href="https://paperswithcode.com/" class="uri">https://paperswithcode.com/</a></p>
<p><strong>Kaggle</strong></p>
<p>Kaggle is a data science competition platform and online community for data scientists and machine learning practitioners under Google LLC. Has a huge repository of community-published data.</p>
<p>The website can be accessed here: <a href="https://www.kaggle.com/" class="uri">https://www.kaggle.com/</a></p>
<p><strong>Scientific articles</strong></p>
<p>It is becoming increasingly common for scientific articles to share their data via public repositories (e.g., osf.io). You may be able to find interesting and relevant datasets by searching Google Scholar for articles on topics of interest which share their data.</p>
</div>
</div>
<div id="task-1---familiarize-yourself-with-important-r-commands" class="section level2 hasAnchor" number="2.2">
<h2><span class="header-section-number">2.2</span> Task 1 - Familiarize yourself with important R commands<a href="week-13---fundamental-of-natural-language-processing.html#task-1---familiarize-yourself-with-important-r-commands" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Below are a number of important R libraries, commands, and functions which you need to be familiar with to effectively process text data. Your first task is to familiarize yourself with these. You are encouraged to copy over the code and run them on your own machines.</p>
<div id="file-types" class="section level3 hasAnchor" number="2.2.1">
<h3><span class="header-section-number">2.2.1</span> File Types<a href="week-13---fundamental-of-natural-language-processing.html#file-types" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This section provides an overview of common file types (<code>.csv</code>, <code>.xlsx</code>, <code>.rds</code>, <code>.json</code>, <code>.txt</code>) and explains how to open them using conventional Windows programs and R.</p>
<p><strong>.csv (Comma-Separated Values)</strong></p>
<p>Description: A plain text file where data is stored in a tabular format, with each row on a new line and columns separated by commas.</p>
<p>How to open in Windows:</p>
<ul>
<li><strong>Microsoft Excel:</strong> Right-click the file → Open with Excel. Alternatively, open Excel and import the file through the “Data” tab.</li>
<li><strong>Notepad/Notepad++:</strong> Right-click → Open with Notepad or another text editor.</li>
</ul>
<p>How to open in R:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="week-13---fundamental-of-natural-language-processing.html#cb1-1" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;path/to/file.csv&quot;</span>)</span></code></pre></div>
<p><strong>.xlsx (Excel Spreadsheet)</strong></p>
<p>Description: A Microsoft Excel file format that stores data in worksheets with support for formatting, formulas, and multiple sheets.</p>
<p>How to open in Windows:</p>
<ul>
<li><strong>Microsoft Excel:</strong> Double-click the file to open in Excel.</li>
<li><strong>Google Sheets:</strong> Upload the file to Google Drive and open it in Google Sheets (web-based).</li>
</ul>
<p>How to open in R:
Using the <code>openxlsx</code> package:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="week-13---fundamental-of-natural-language-processing.html#cb2-1" tabindex="-1"></a><span class="fu">library</span>(openxlsx)</span>
<span id="cb2-2"><a href="week-13---fundamental-of-natural-language-processing.html#cb2-2" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read.xlsx</span>(<span class="st">&quot;path/to/file.xlsx&quot;</span>, <span class="at">sheet =</span> <span class="dv">1</span>)  <span class="co"># Specify the sheet if needed</span></span></code></pre></div>
<p><strong>.rds (R Data File)</strong></p>
<p>Description: A file format unique to R that stores R objects in a binary format for efficient storage and loading.</p>
<p>How to open in Windows:</p>
<ul>
<li><strong>Not Directly Openable:</strong> You cannot open <code>.rds</code> files in common Windows programs. They are intended for use within R.</li>
</ul>
<p>How to open in R:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="week-13---fundamental-of-natural-language-processing.html#cb3-1" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;path/to/file.rds&quot;</span>)</span></code></pre></div>
<p><strong>.json (JavaScript Object Notation)</strong></p>
<p>Description: A lightweight, human-readable format for structuring data, often used in web APIs and configuration files.</p>
<p>How to open in Windows:</p>
<ul>
<li><strong>Notepad/Notepad++:</strong> Right-click → Open with Notepad or another text editor.</li>
<li><strong>Web Browser:</strong> Drag the file into a browser for a formatted view.</li>
</ul>
<p>How to open in R:
Using the <code>jsonlite</code> package:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="week-13---fundamental-of-natural-language-processing.html#cb4-1" tabindex="-1"></a><span class="fu">library</span>(jsonlite)</span>
<span id="cb4-2"><a href="week-13---fundamental-of-natural-language-processing.html#cb4-2" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">fromJSON</span>(<span class="st">&quot;path/to/file.json&quot;</span>)</span></code></pre></div>
<p><strong>.txt (Plain Text File)</strong></p>
<p>Description: A basic text file containing unformatted text, often used for simple data storage or documentation.</p>
<p>How to open in Windows:</p>
<ul>
<li><strong>Notepad/Notepad++:</strong> Double-click to open in Notepad or another text editor.</li>
<li><strong>Microsoft Word:</strong> Open in Word to add formatting or modify the content.</li>
</ul>
<p>How to open in R:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="week-13---fundamental-of-natural-language-processing.html#cb5-1" tabindex="-1"></a><span class="co"># For line-by-line reading</span></span>
<span id="cb5-2"><a href="week-13---fundamental-of-natural-language-processing.html#cb5-2" tabindex="-1"></a>lines <span class="ot">&lt;-</span> <span class="fu">readLines</span>(<span class="st">&quot;path/to/file.txt&quot;</span>)</span>
<span id="cb5-3"><a href="week-13---fundamental-of-natural-language-processing.html#cb5-3" tabindex="-1"></a></span>
<span id="cb5-4"><a href="week-13---fundamental-of-natural-language-processing.html#cb5-4" tabindex="-1"></a><span class="co"># For reading as a table</span></span>
<span id="cb5-5"><a href="week-13---fundamental-of-natural-language-processing.html#cb5-5" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">&quot;path/to/file.txt&quot;</span>, <span class="at">header =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
</div>
<div id="accessing-nested-data" class="section level3 hasAnchor" number="2.2.2">
<h3><span class="header-section-number">2.2.2</span> Accessing nested data<a href="week-13---fundamental-of-natural-language-processing.html#accessing-nested-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You may find that many data formats you encounter will not seamlessly convert into the sorts of R objects you want for further analyses. Often you will find that text data is read into nested lists which require further formatting. This is common for .json files.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-1" tabindex="-1"></a><span class="co">#load package to read json files</span></span>
<span id="cb6-2"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-2" tabindex="-1"></a><span class="fu">library</span>(jsonlite)</span>
<span id="cb6-3"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-3" tabindex="-1"></a></span>
<span id="cb6-4"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-4" tabindex="-1"></a><span class="co"># Read test json data</span></span>
<span id="cb6-5"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-5" tabindex="-1"></a>json_data <span class="ot">&lt;-</span> <span class="fu">fromJSON</span>(<span class="st">&quot;test_json.json&quot;</span>)</span>
<span id="cb6-6"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-6" tabindex="-1"></a></span>
<span id="cb6-7"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-7" tabindex="-1"></a><span class="co"># The structure of the .json file is as follows</span></span>
<span id="cb6-8"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-8" tabindex="-1"></a>{</span>
<span id="cb6-9"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-9" tabindex="-1"></a>  <span class="st">&quot;name&quot;</span><span class="sc">:</span><span class="st">&quot;John Doe&quot;</span>, </span>
<span id="cb6-10"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-10" tabindex="-1"></a>  <span class="st">&quot;age&quot;</span><span class="sc">:</span><span class="dv">30</span>, </span>
<span id="cb6-11"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-11" tabindex="-1"></a>  <span class="st">&quot;address&quot;</span><span class="sc">:</span>{</span>
<span id="cb6-12"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-12" tabindex="-1"></a>    <span class="st">&quot;street&quot;</span><span class="sc">:</span><span class="st">&quot;123 Main St&quot;</span>, </span>
<span id="cb6-13"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-13" tabindex="-1"></a>    <span class="st">&quot;city&quot;</span><span class="sc">:</span><span class="st">&quot;New York&quot;</span>, </span>
<span id="cb6-14"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-14" tabindex="-1"></a>    <span class="st">&quot;state&quot;</span><span class="sc">:</span><span class="st">&quot;NY&quot;</span></span>
<span id="cb6-15"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-15" tabindex="-1"></a>  }, </span>
<span id="cb6-16"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-16" tabindex="-1"></a>  <span class="st">&quot;blog&quot;</span><span class="sc">:</span>{</span>
<span id="cb6-17"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-17" tabindex="-1"></a>    <span class="st">&quot;url&quot;</span><span class="sc">:</span><span class="st">&quot;https://johndoe.com&quot;</span>, </span>
<span id="cb6-18"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-18" tabindex="-1"></a>    <span class="st">&quot;description&quot;</span><span class="sc">:</span><span class="st">&quot;John&#39;s personal blog about tech and coding.&quot;</span></span>
<span id="cb6-19"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-19" tabindex="-1"></a>  }</span>
<span id="cb6-20"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-20" tabindex="-1"></a>  <span class="st">&quot;contacts&quot;</span><span class="sc">:</span>[{</span>
<span id="cb6-21"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-21" tabindex="-1"></a>    <span class="st">&quot;type&quot;</span><span class="sc">:</span><span class="st">&quot;email&quot;</span>, </span>
<span id="cb6-22"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-22" tabindex="-1"></a>    <span class="st">&quot;value&quot;</span><span class="sc">:</span><span class="st">&quot;johndoe@example.com&quot;</span></span>
<span id="cb6-23"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-23" tabindex="-1"></a>  }, {</span>
<span id="cb6-24"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-24" tabindex="-1"></a>    <span class="st">&quot;type&quot;</span><span class="sc">:</span><span class="st">&quot;phone&quot;</span>, </span>
<span id="cb6-25"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-25" tabindex="-1"></a>    <span class="st">&quot;value&quot;</span><span class="sc">:</span><span class="st">&quot;555-1234&quot;</span></span>
<span id="cb6-26"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-26" tabindex="-1"></a>  }],</span>
<span id="cb6-27"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-27" tabindex="-1"></a>}</span>
<span id="cb6-28"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-28" tabindex="-1"></a></span>
<span id="cb6-29"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-29" tabindex="-1"></a><span class="co"># You will notice, however, that this stucture not fully visable when accessed as a dataframe</span></span>
<span id="cb6-30"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-30" tabindex="-1"></a><span class="fu">View</span>(json_data)</span>
<span id="cb6-31"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-31" tabindex="-1"></a></span>
<span id="cb6-32"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-32" tabindex="-1"></a><span class="co"># Accessing top-level data (name, age)</span></span>
<span id="cb6-33"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-33" tabindex="-1"></a>json_data<span class="sc">$</span>name  <span class="co"># Output: &quot;John Doe&quot;</span></span>
<span id="cb6-34"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-34" tabindex="-1"></a>json_data<span class="sc">$</span>age   <span class="co"># Output: 30</span></span>
<span id="cb6-35"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-35" tabindex="-1"></a></span>
<span id="cb6-36"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-36" tabindex="-1"></a><span class="co"># Accessing nested data (address, blog)</span></span>
<span id="cb6-37"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-37" tabindex="-1"></a>json_data<span class="sc">$</span>address<span class="sc">$</span>street  <span class="co"># Output: &quot;123 Main St&quot;</span></span>
<span id="cb6-38"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-38" tabindex="-1"></a>json_data<span class="sc">$</span>address<span class="sc">$</span>city    <span class="co"># Output: &quot;New York&quot;</span></span>
<span id="cb6-39"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-39" tabindex="-1"></a>json_data<span class="sc">$</span>address<span class="sc">$</span>state   <span class="co"># Output: &quot;NY&quot;</span></span>
<span id="cb6-40"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-40" tabindex="-1"></a>json_data<span class="sc">$</span>blog<span class="sc">$</span>url         <span class="co"># Output: &quot;https://johndoe.com&quot;</span></span>
<span id="cb6-41"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-41" tabindex="-1"></a>json_data<span class="sc">$</span>blog<span class="sc">$</span>description <span class="co"># Output: &quot;John&#39;s personal blog about tech and coding.&quot;</span></span>
<span id="cb6-42"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-42" tabindex="-1"></a></span>
<span id="cb6-43"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-43" tabindex="-1"></a><span class="co"># Accessing further nested arrays (e.g., first contact email)</span></span>
<span id="cb6-44"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-44" tabindex="-1"></a>json_data<span class="sc">$</span>contacts[[<span class="dv">1</span>]]<span class="sc">$</span>value[<span class="dv">1</span>] <span class="co"># Output: &quot;johndoe@example.com&quot;</span></span>
<span id="cb6-45"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-45" tabindex="-1"></a>json_data<span class="sc">$</span>contacts[[<span class="dv">1</span>]]<span class="sc">$</span>value[<span class="dv">2</span>] <span class="co"># Output: &quot;555-1234&quot;</span></span>
<span id="cb6-46"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-46" tabindex="-1"></a></span>
<span id="cb6-47"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-47" tabindex="-1"></a><span class="co"># Pulling out all relevant details and saving them in a new dataframe</span></span>
<span id="cb6-48"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-48" tabindex="-1"></a>dataframe <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">name =</span> json_data<span class="sc">$</span>name,</span>
<span id="cb6-49"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-49" tabindex="-1"></a>                        <span class="at">age =</span> json_data<span class="sc">$</span>age,</span>
<span id="cb6-50"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-50" tabindex="-1"></a>                        <span class="at">street_address =</span> json_data<span class="sc">$</span>address<span class="sc">$</span>street,</span>
<span id="cb6-51"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-51" tabindex="-1"></a>                        <span class="at">city_address =</span> json_data<span class="sc">$</span>address<span class="sc">$</span>city,</span>
<span id="cb6-52"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-52" tabindex="-1"></a>                        <span class="at">state_address =</span> json_data<span class="sc">$</span>address<span class="sc">$</span>state,</span>
<span id="cb6-53"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-53" tabindex="-1"></a>                        <span class="at">blog_url =</span> json_data<span class="sc">$</span>blog<span class="sc">$</span>url ,</span>
<span id="cb6-54"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-54" tabindex="-1"></a>                        <span class="at">blog_description =</span> json_data<span class="sc">$</span>blog<span class="sc">$</span>description,</span>
<span id="cb6-55"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-55" tabindex="-1"></a>                        <span class="at">email =</span> json_data<span class="sc">$</span>contacts[[<span class="dv">1</span>]]<span class="sc">$</span>value[<span class="dv">1</span>],</span>
<span id="cb6-56"><a href="week-13---fundamental-of-natural-language-processing.html#cb6-56" tabindex="-1"></a>                        <span class="at">phone =</span> json_data<span class="sc">$</span>contacts[[<span class="dv">1</span>]]<span class="sc">$</span>value[<span class="dv">2</span>])</span></code></pre></div>
<p><strong>Explanation</strong></p>
<p>Reading JSON: The fromJSON() function from the jsonlite package is used to read a JSON file into an R object (in this case, json_data).</p>
<p>Accessing Top-Level Data: You can access simple fields (like name and age) directly using the $ operator.</p>
<p>Accessing Nested Data: For the nested address object, we access it like json_data<span class="math inline">\(address\)</span>street.</p>
<p>For arrays (like contacts), we use [[ ]] indexing to access elements. For example, json_data$contacts[[1]] gives us the first contact, and we can then extract the type and value, as well as focus in on the first or second elements by using [ ]</p>
</div>
<div id="cleaning-data" class="section level3 hasAnchor" number="2.2.3">
<h3><span class="header-section-number">2.2.3</span> Cleaning data<a href="week-13---fundamental-of-natural-language-processing.html#cleaning-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Many types of text data have characters or strings in them which may be irrelevant or undesirable to the quantitative researcher. Corpora can have metadata and tags which you may wish to remove prior to your analyses (e.g., “Start:” to indicate where a speech begins). Similarly, you may wish to remove certain information from social media texts prior to your analyses, like hashtags or URLs. Many of these operations rely on regular expressions–a formal language for specifying text strings. If you are curious, here is a short video by Professor Dan Jurafsky: <a href="https://www.youtube.com/watch?v=UbIQxT3bApU" class="uri">https://www.youtube.com/watch?v=UbIQxT3bApU</a></p>
<p>Below are a number of common functions in R which can help you clean your data. Try running them to see how they work.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="week-13---fundamental-of-natural-language-processing.html#cb7-1" tabindex="-1"></a><span class="co"># Sample string</span></span>
<span id="cb7-2"><a href="week-13---fundamental-of-natural-language-processing.html#cb7-2" tabindex="-1"></a>text <span class="ot">&lt;-</span> <span class="st">&quot;Start: Hello world! Check out this link: https://example.com #excited&quot;</span></span>
<span id="cb7-3"><a href="week-13---fundamental-of-natural-language-processing.html#cb7-3" tabindex="-1"></a></span>
<span id="cb7-4"><a href="week-13---fundamental-of-natural-language-processing.html#cb7-4" tabindex="-1"></a><span class="co"># Remove the first 6 characters</span></span>
<span id="cb7-5"><a href="week-13---fundamental-of-natural-language-processing.html#cb7-5" tabindex="-1"></a>text_without_first_6 <span class="ot">&lt;-</span> <span class="fu">substr</span>(text, <span class="dv">7</span>, <span class="fu">nchar</span>(text))</span>
<span id="cb7-6"><a href="week-13---fundamental-of-natural-language-processing.html#cb7-6" tabindex="-1"></a><span class="fu">print</span>(text_without_first_6)  <span class="co"># Output: &quot; Hello world! Check out this link: https://example.com #excited&quot;</span></span>
<span id="cb7-7"><a href="week-13---fundamental-of-natural-language-processing.html#cb7-7" tabindex="-1"></a></span>
<span id="cb7-8"><a href="week-13---fundamental-of-natural-language-processing.html#cb7-8" tabindex="-1"></a><span class="co"># Remove hashtags</span></span>
<span id="cb7-9"><a href="week-13---fundamental-of-natural-language-processing.html#cb7-9" tabindex="-1"></a>text_no_hashtags <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">&quot;#</span><span class="sc">\\</span><span class="st">w+&quot;</span>, <span class="st">&quot;&quot;</span>, text_without_first_6)</span>
<span id="cb7-10"><a href="week-13---fundamental-of-natural-language-processing.html#cb7-10" tabindex="-1"></a><span class="fu">print</span>(text_no_hashtags)  <span class="co"># Output: &quot; Hello world! Check out this link: https://example.com &quot;</span></span>
<span id="cb7-11"><a href="week-13---fundamental-of-natural-language-processing.html#cb7-11" tabindex="-1"></a></span>
<span id="cb7-12"><a href="week-13---fundamental-of-natural-language-processing.html#cb7-12" tabindex="-1"></a><span class="co"># Remove URLs</span></span>
<span id="cb7-13"><a href="week-13---fundamental-of-natural-language-processing.html#cb7-13" tabindex="-1"></a>text_no_hashtags_urls <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">&quot;https?://</span><span class="sc">\\</span><span class="st">S+&quot;</span>, <span class="st">&quot;&quot;</span>, text_no_hashtags)</span>
<span id="cb7-14"><a href="week-13---fundamental-of-natural-language-processing.html#cb7-14" tabindex="-1"></a><span class="fu">print</span>(text_no_hashtags_urls)  <span class="co"># Output: &quot; Hello world! Check out this link:  &quot;</span></span>
<span id="cb7-15"><a href="week-13---fundamental-of-natural-language-processing.html#cb7-15" tabindex="-1"></a></span>
<span id="cb7-16"><a href="week-13---fundamental-of-natural-language-processing.html#cb7-16" tabindex="-1"></a><span class="co"># Remove leading and trailing spaces</span></span>
<span id="cb7-17"><a href="week-13---fundamental-of-natural-language-processing.html#cb7-17" tabindex="-1"></a>text_cleaned <span class="ot">&lt;-</span> <span class="fu">trimws</span>(text_no_hashtags_urls)</span>
<span id="cb7-18"><a href="week-13---fundamental-of-natural-language-processing.html#cb7-18" tabindex="-1"></a><span class="fu">print</span>(text_cleaned)  <span class="co"># Output: &quot;Hello world! Check out this link:&quot;</span></span></code></pre></div>
<p><strong>Explanation</strong></p>
<p>Removing the first 6 characters:
The <code>substr()</code> function removes letters in the string. We pass it the ‘text’ object to tell it which string to operate on, <code>6</code> to tell it the position to start deleting from, and <code>nchar(text)</code> to tell it to delete all the way to the last position of the text–which is equal to the total number of characters in the string, given by <code>nchar(text)</code>.</p>
<p>Removing hashtags:
The <code>gsub()</code> function matches and replaces strings. We pass the regular expression <code>#\\w+</code> to match any word following a <code>#</code> symbol and <code>""</code> to replace it with nothing (effectively deleting it). Finally, we pass the <code>text_without_first_6</code> object to tell it which string to operate on.</p>
<p>Removing URLs:
We use the <code>gsub()</code> function again but this time with the regular expression <code>https?://\\S+</code> to match URLs that start with <code>http://</code> or <code>https://</code>. We replace these with nothing <code>""</code> and the <code>text_without_first_6</code> object.</p>
<p>Removing leading and trailing spaces:
We use the <code>trimws()</code> to remove leading and trailing spaces.</p>
</div>
<div id="counting-words" class="section level3 hasAnchor" number="2.2.4">
<h3><span class="header-section-number">2.2.4</span> Counting words<a href="week-13---fundamental-of-natural-language-processing.html#counting-words" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In many cases it will be important for you to know how many words each of your texts contains. As it turns out, it is more difficult than you might assume to define exactly what constitutes a word. For example, is <code>?</code> a word? Is <code>never-ending</code> one or two words?. If you are curious to know more, this short video may be illuminating: <a href="https://www.youtube.com/watch?v=em0ePorcp48" class="uri">https://www.youtube.com/watch?v=em0ePorcp48</a></p>
<p>For the purposes of this workshop though, let’s stick to addressing the practical problem of simply getting an estimate of how many words a text contains.</p>
<p>Knowing how many words each string contains has many practical benefits, the most obvious is to filter out data which contains little or no content of interest. For example, we might reasonably filter out strings which have no words in them.</p>
<p>Here is an example which uses a simple function to count the number of words in a string, relying on the <code>str_count()</code> function from the <code>tidyverse</code> library.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="week-13---fundamental-of-natural-language-processing.html#cb8-1" tabindex="-1"></a><span class="co"># Load required package</span></span>
<span id="cb8-2"><a href="week-13---fundamental-of-natural-language-processing.html#cb8-2" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb8-3"><a href="week-13---fundamental-of-natural-language-processing.html#cb8-3" tabindex="-1"></a></span>
<span id="cb8-4"><a href="week-13---fundamental-of-natural-language-processing.html#cb8-4" tabindex="-1"></a><span class="co"># Define a new function to count words in a string</span></span>
<span id="cb8-5"><a href="week-13---fundamental-of-natural-language-processing.html#cb8-5" tabindex="-1"></a>nwords <span class="ot">&lt;-</span> </span>
<span id="cb8-6"><a href="week-13---fundamental-of-natural-language-processing.html#cb8-6" tabindex="-1"></a>  <span class="cf">function</span>(string, <span class="at">pseudo=</span>F){</span>
<span id="cb8-7"><a href="week-13---fundamental-of-natural-language-processing.html#cb8-7" tabindex="-1"></a>    <span class="fu">ifelse</span>(pseudo, </span>
<span id="cb8-8"><a href="week-13---fundamental-of-natural-language-processing.html#cb8-8" tabindex="-1"></a>           pattern <span class="ot">&lt;-</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">S+&quot;</span>, </span>
<span id="cb8-9"><a href="week-13---fundamental-of-natural-language-processing.html#cb8-9" tabindex="-1"></a>           pattern <span class="ot">&lt;-</span> <span class="st">&quot;[[:alpha:]]+&quot;</span> </span>
<span id="cb8-10"><a href="week-13---fundamental-of-natural-language-processing.html#cb8-10" tabindex="-1"></a>    )</span>
<span id="cb8-11"><a href="week-13---fundamental-of-natural-language-processing.html#cb8-11" tabindex="-1"></a>    <span class="fu">str_count</span>(string, pattern)</span>
<span id="cb8-12"><a href="week-13---fundamental-of-natural-language-processing.html#cb8-12" tabindex="-1"></a>  }</span>
<span id="cb8-13"><a href="week-13---fundamental-of-natural-language-processing.html#cb8-13" tabindex="-1"></a></span>
<span id="cb8-14"><a href="week-13---fundamental-of-natural-language-processing.html#cb8-14" tabindex="-1"></a><span class="co"># Define a vector with four text strings</span></span>
<span id="cb8-15"><a href="week-13---fundamental-of-natural-language-processing.html#cb8-15" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">texts =</span> <span class="fu">c</span>(<span class="st">&quot;Data Science is fun!&quot;</span>, <span class="st">&quot;Learn R Programming.&quot;</span>, <span class="st">&quot;:)!&quot;</span>, <span class="st">&quot;Analysis with R&quot;</span>),</span>
<span id="cb8-16"><a href="week-13---fundamental-of-natural-language-processing.html#cb8-16" tabindex="-1"></a>                   <span class="at">nwords =</span> <span class="cn">NA</span>)</span>
<span id="cb8-17"><a href="week-13---fundamental-of-natural-language-processing.html#cb8-17" tabindex="-1"></a></span>
<span id="cb8-18"><a href="week-13---fundamental-of-natural-language-processing.html#cb8-18" tabindex="-1"></a><span class="co"># Apply the nwords function to the vector</span></span>
<span id="cb8-19"><a href="week-13---fundamental-of-natural-language-processing.html#cb8-19" tabindex="-1"></a><span class="fu">nwords</span>(data<span class="sc">$</span>texts)</span>
<span id="cb8-20"><a href="week-13---fundamental-of-natural-language-processing.html#cb8-20" tabindex="-1"></a></span>
<span id="cb8-21"><a href="week-13---fundamental-of-natural-language-processing.html#cb8-21" tabindex="-1"></a><span class="co"># Append the nwords to the text_data frame</span></span>
<span id="cb8-22"><a href="week-13---fundamental-of-natural-language-processing.html#cb8-22" tabindex="-1"></a>data<span class="sc">$</span>nwords <span class="ot">&lt;-</span> <span class="fu">nwords</span>(data<span class="sc">$</span>texts)</span>
<span id="cb8-23"><a href="week-13---fundamental-of-natural-language-processing.html#cb8-23" tabindex="-1"></a></span>
<span id="cb8-24"><a href="week-13---fundamental-of-natural-language-processing.html#cb8-24" tabindex="-1"></a><span class="co"># Filter out strings which have zero words</span></span>
<span id="cb8-25"><a href="week-13---fundamental-of-natural-language-processing.html#cb8-25" tabindex="-1"></a>data_filtered <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb8-26"><a href="week-13---fundamental-of-natural-language-processing.html#cb8-26" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>nwords<span class="sc">==</span><span class="dv">0</span>)</span>
<span id="cb8-27"><a href="week-13---fundamental-of-natural-language-processing.html#cb8-27" tabindex="-1"></a>  </span>
<span id="cb8-28"><a href="week-13---fundamental-of-natural-language-processing.html#cb8-28" tabindex="-1"></a><span class="co"># Print the filtered data</span></span>
<span id="cb8-29"><a href="week-13---fundamental-of-natural-language-processing.html#cb8-29" tabindex="-1"></a><span class="fu">print</span>(data_filtered)</span></code></pre></div>
<p><strong>Explanation</strong></p>
<ul>
<li>After loading the required packages and defining the function to count the number of words in a vector of strings, we define a dataframe with four texts and a empty vector to hold their word-counts</li>
<li>We apply the <code>nwords()</code> function to texts in <code>data$texts</code> to attain the word counts, and assign them to the empty vector <code>data$nwords</code></li>
<li>We use the the pipe operator <code>%&gt;%</code> and <code>filter()</code> function to retain only cases where nwords does not equal 0 <code>filter(!nwords==0)</code> which in this case, removes the row no words “:)!”</li>
</ul>
</div>
<div id="identifying-specific-instances" class="section level3 hasAnchor" number="2.2.5">
<h3><span class="header-section-number">2.2.5</span> Identifying specific instances<a href="week-13---fundamental-of-natural-language-processing.html#identifying-specific-instances" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>For many types of analyses you will want to identify specific types of text data either because they are relevant or irrelevant to your analyses. The most basic way of doing this is via key-word searches.</p>
<p>The <code>grepl()</code> function is used to search for patterns or keywords within a string and returns TRUE or FALSE depending on whether the pattern is found.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="week-13---fundamental-of-natural-language-processing.html#cb9-1" tabindex="-1"></a><span class="co"># Example text data</span></span>
<span id="cb9-2"><a href="week-13---fundamental-of-natural-language-processing.html#cb9-2" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">texts =</span> <span class="fu">c</span>(<span class="st">&quot;Data Science is fun!&quot;</span>, <span class="st">&quot;Learn R Programming.&quot;</span>, <span class="st">&quot;Python is great.&quot;</span>, <span class="st">&quot;R is powerful.&quot;</span>))</span>
<span id="cb9-3"><a href="week-13---fundamental-of-natural-language-processing.html#cb9-3" tabindex="-1"></a></span>
<span id="cb9-4"><a href="week-13---fundamental-of-natural-language-processing.html#cb9-4" tabindex="-1"></a><span class="co"># Search for the word &quot;python&quot;</span></span>
<span id="cb9-5"><a href="week-13---fundamental-of-natural-language-processing.html#cb9-5" tabindex="-1"></a>result <span class="ot">&lt;-</span> <span class="fu">grepl</span>(<span class="st">&quot;python&quot;</span>, data<span class="sc">$</span>texts, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>)</span>
<span id="cb9-6"><a href="week-13---fundamental-of-natural-language-processing.html#cb9-6" tabindex="-1"></a></span>
<span id="cb9-7"><a href="week-13---fundamental-of-natural-language-processing.html#cb9-7" tabindex="-1"></a><span class="co"># Print the result</span></span>
<span id="cb9-8"><a href="week-13---fundamental-of-natural-language-processing.html#cb9-8" tabindex="-1"></a><span class="fu">print</span>(result)</span>
<span id="cb9-9"><a href="week-13---fundamental-of-natural-language-processing.html#cb9-9" tabindex="-1"></a></span>
<span id="cb9-10"><a href="week-13---fundamental-of-natural-language-processing.html#cb9-10" tabindex="-1"></a><span class="co"># Select only cases with the word &quot;python&quot;</span></span>
<span id="cb9-11"><a href="week-13---fundamental-of-natural-language-processing.html#cb9-11" tabindex="-1"></a>data_python <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb9-12"><a href="week-13---fundamental-of-natural-language-processing.html#cb9-12" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">grepl</span>(<span class="st">&quot;python&quot;</span>, texts, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>))</span></code></pre></div>
<p><strong>Explanation</strong></p>
<ul>
<li>The <code>grepl("Programming", data$texts, ignore.case = TRUE)</code> function checks each string in the <code>data$texts</code> to see if it contains the string <code>"python"</code>.</li>
<li>Note that we defined <code>ignore.case = TRUE</code> in the <code>grepl(</code> function to allow <code>"python"</code> to match to <code>"Python"</code>. Try setting <code>ignore.case = FALSE</code> and see how this changes the output.</li>
<li>We can combine <code>grepl()</code> with <code>filter()</code> to remove rows which do now contain <code>"python"</code> in <code>data$texts</code>.</li>
</ul>
</div>
<div id="using-loops" class="section level3 hasAnchor" number="2.2.6">
<h3><span class="header-section-number">2.2.6</span> Using loops<a href="week-13---fundamental-of-natural-language-processing.html#using-loops" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Now that you have learnt how to read and process individual files and examples, its time to learn how to automate this process for large amounts of data. Loops are indispensable for this. They are used to repeat a block of code multiple times. This is helpful when you need to perform repetitive tasks, like iterating over many data files or instances of text. The most common types of loops in R is the <code>for</code> loop which iterates through a sequence of specified values:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="week-13---fundamental-of-natural-language-processing.html#cb10-1" tabindex="-1"></a><span class="co"># Example of a &#39;for&#39; loop in R</span></span>
<span id="cb10-2"><a href="week-13---fundamental-of-natural-language-processing.html#cb10-2" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) {</span>
<span id="cb10-3"><a href="week-13---fundamental-of-natural-language-processing.html#cb10-3" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">&quot;Iteration number:&quot;</span>, i))</span>
<span id="cb10-4"><a href="week-13---fundamental-of-natural-language-processing.html#cb10-4" tabindex="-1"></a>}</span></code></pre></div>
<p><strong>Explanation</strong></p>
<ul>
<li>The for loop will iterate over the sequence 1:5 (numbers 1 through 5).</li>
<li>For each iteration, it will print “Iteration number:” followed by the current value of i.</li>
</ul>
<p>Let’s see the value of looping over numerous text instances to quickly clean and save them.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="week-13---fundamental-of-natural-language-processing.html#cb11-1" tabindex="-1"></a><span class="co"># Sample text data with 3 values</span></span>
<span id="cb11-2"><a href="week-13---fundamental-of-natural-language-processing.html#cb11-2" tabindex="-1"></a>text_data <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;  Hello World!  &quot;</span>, <span class="st">&quot;  R is great! &quot;</span>, <span class="st">&quot;  CLEANING text DATA.  &quot;</span>)</span>
<span id="cb11-3"><a href="week-13---fundamental-of-natural-language-processing.html#cb11-3" tabindex="-1"></a></span>
<span id="cb11-4"><a href="week-13---fundamental-of-natural-language-processing.html#cb11-4" tabindex="-1"></a><span class="co"># Initialize an empty dataframe with 3 rows to store the cleaned text</span></span>
<span id="cb11-5"><a href="week-13---fundamental-of-natural-language-processing.html#cb11-5" tabindex="-1"></a>cleaned_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">id =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>,</span>
<span id="cb11-6"><a href="week-13---fundamental-of-natural-language-processing.html#cb11-6" tabindex="-1"></a>                           <span class="at">cleaned_text =</span> <span class="cn">NA</span>)</span>
<span id="cb11-7"><a href="week-13---fundamental-of-natural-language-processing.html#cb11-7" tabindex="-1"></a></span>
<span id="cb11-8"><a href="week-13---fundamental-of-natural-language-processing.html#cb11-8" tabindex="-1"></a><span class="co"># For loop from 1:3 to clean the text</span></span>
<span id="cb11-9"><a href="week-13---fundamental-of-natural-language-processing.html#cb11-9" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>) {</span>
<span id="cb11-10"><a href="week-13---fundamental-of-natural-language-processing.html#cb11-10" tabindex="-1"></a>  cleaned_data<span class="sc">$</span>cleaned_text[i] <span class="ot">&lt;-</span> <span class="fu">trimws</span>(text_data[i])  <span class="co"># Remove extra spaces</span></span>
<span id="cb11-11"><a href="week-13---fundamental-of-natural-language-processing.html#cb11-11" tabindex="-1"></a>}</span>
<span id="cb11-12"><a href="week-13---fundamental-of-natural-language-processing.html#cb11-12" tabindex="-1"></a></span>
<span id="cb11-13"><a href="week-13---fundamental-of-natural-language-processing.html#cb11-13" tabindex="-1"></a><span class="co"># Print cleaned data</span></span>
<span id="cb11-14"><a href="week-13---fundamental-of-natural-language-processing.html#cb11-14" tabindex="-1"></a><span class="fu">print</span>(cleaned_data)</span></code></pre></div>
<p><strong>Explanation</strong></p>
<ul>
<li>The for loop will iterate over each value in <code>text_data</code> in the sequence 1:3 by replacing the value i in <code>text_data[i]</code> (e.g., the first iteration pulls <code>"  Hello World!  "</code> by calling <code>text_data[1]</code>)</li>
<li>For each iteration, it uses <code>trimws()</code> to remove leading and trailing spaces.</li>
<li>Each cleaned text is saved in the initialized dataframe <code>cleaned_data</code> by placing it in the <code>$cleaned_text</code> vector in the cell defined by <code>[i]</code> (e.g., the third iteration assigns the cleaned text <code>"CLEANING text DATA."</code> to the third row of via <code>cleaned_data$cleaned_text[3]</code>)</li>
</ul>
</div>
</div>
<div id="task-2---putting-your-knowledge-to-the-test" class="section level2 hasAnchor" number="2.3">
<h2><span class="header-section-number">2.3</span> Task 2 - Putting your knowledge to the test<a href="week-13---fundamental-of-natural-language-processing.html#task-2---putting-your-knowledge-to-the-test" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Oftentimes text data will be made available in a way that is not conducive to psychological analyses. Typically, we want our data to be in tabular format saved as vectors in R data frames. Let’s have a go at converting.</p>
<div id="compile-a-single-dataframe" class="section level3 hasAnchor" number="2.3.1">
<h3><span class="header-section-number">2.3.1</span> Compile a single dataframe<a href="week-13---fundamental-of-natural-language-processing.html#compile-a-single-dataframe" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>Challenge 1</strong></p>
<p>Adapt your understanding of the Create a loop which reads a .txt file and appends it to to a dataframe.</p>
</div>
<div id="extract-nested-fields" class="section level3 hasAnchor" number="2.3.2">
<h3><span class="header-section-number">2.3.2</span> Extract nested fields<a href="week-13---fundamental-of-natural-language-processing.html#extract-nested-fields" class="anchor-section" aria-label="Anchor link to header"></a></h3>
</div>
<div id="clean" class="section level3 hasAnchor" number="2.3.3">
<h3><span class="header-section-number">2.3.3</span> Clean<a href="week-13---fundamental-of-natural-language-processing.html#clean" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This section provides an overview of common file types (<code>.csv</code>, <code>.xlsx</code>, <code>.rds</code>, <code>.json</code>, <code>.txt</code>) and explains how to open them using conventional Windows programs and R.</p>
</div>
<div id="pick-out-relevant-cases" class="section level3 hasAnchor" number="2.3.4">
<h3><span class="header-section-number">2.3.4</span> Pick out relevant cases<a href="week-13---fundamental-of-natural-language-processing.html#pick-out-relevant-cases" class="anchor-section" aria-label="Anchor link to header"></a></h3>
</div>
<div id="solutions" class="section level3 hasAnchor" number="2.3.5">
<h3><span class="header-section-number">2.3.5</span> Solutions<a href="week-13---fundamental-of-natural-language-processing.html#solutions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>Solution 1</strong>
Adapt your understanding of the Create a loop which reads a .txt file and appends it to to a dataframe.</p>
<p><strong>Tip:</strong> It is often unfeasible to manually define all of the files you wish to iterate over, as you may have many thousands of them. A solution to this can be found in the <code>Sys.glob()</code> command, which will define a new vector with all file names in your currently-active folder of a certain sort. For example, to define a vector with all <code>.txt</code> files in your working folder you can specify: <code>files &lt;- (Sys.glob("*.txt"))</code></p>
<p><strong>Solution 2</strong>
Adapt your understanding of the Create a loop which reads a .txt file and appends it to to a dataframe.</p>
<p><strong>Solution3</strong>
Adapt your understanding of the Create a loop which reads a .txt file and appends it to to a dataframe.</p>
</div>
</div>
<div id="bonus-task-1---picking-your-data" class="section level2 hasAnchor" number="2.4">
<h2><span class="header-section-number">2.4</span> Bonus Task 1 - Picking Your Data<a href="week-13---fundamental-of-natural-language-processing.html#bonus-task-1---picking-your-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Now that you have the knowledge and tools to deal with different sorts of text data, you should identify a dataset which lends itself to your research question.</p>
<p>Ask yourself:
Is the sample from an appropriate source?
Are the authors of the text relevant to your investigation?
If the texts are about a specific topic, can your interest be investigated within that topic?
Are there any additional variables in the dataset which can inform your interests?
Can you enrich your analyses Likes, reactions, reposts?
Etc.</p>
<p>The answer may very well be <em>no</em> to all of these; don’t force it.</p>
<p>Please note, you are not required to use a resource from the Collective Data Bank. If none of them spark your interest or afford the sorts of analyses you wish to do, you are free to continue looking for datasets in your free time.</p>
<p>However, for the purposes of the next task, you will need to select at least one.</p>
</div>
<div id="bonus-task-2---considering-ethical-issues" class="section level2 hasAnchor" number="2.5">
<h2><span class="header-section-number">2.5</span> Bonus Task 2 - Considering Ethical Issues<a href="week-13---fundamental-of-natural-language-processing.html#bonus-task-2---considering-ethical-issues" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The lectures in week 11 intended to convey the importance of considering the potential risks arising from analyzing pre-existing text data. Before moving forward with your research, you must consider the following questions in relation to your dataset of choice:</p>
<p>Are there potential impacts on well-being, social or legal standing?
Are you analyzing potentially sensitive or stigmatizing topics?
Could your analysis focus on marginalized or x groups?
Are you
Are there risks related to consent?
Is the data in the public domain?
Was explicit consent obtained by prior researchers and, if so, does this cover subsequent analyses?
Does the data derive from</p>
<p>Are there risks to privacy?
Are there any personal (e.g., names, user profiles, ip, addresses) data?
Is there any way that someone could trace anyone’s identity from your analyses?
Do you foresee any other risks?
What steps can you take to address the potential risks you have identified?</p>
</div>
<div id="bonus-task-3---wrangling-your-data" class="section level2 hasAnchor" number="2.6">
<h2><span class="header-section-number">2.6</span> Bonus Task 3 - Wrangling your data<a href="week-13---fundamental-of-natural-language-processing.html#bonus-task-3---wrangling-your-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Apply what you have learned to wrangle your data into a single dataframe and apply any cleaning steps you think might be necessary.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="appendix-foundations-of-r.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/01-week1.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
